(this["webpackJsonpgoit-react-hw-03-phonebook"]=this["webpackJsonpgoit-react-hw-03-phonebook"]||[]).push([[0],{14:function(e,t,n){"use strict";n.d(t,"d",(function(){return b})),n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return j})),n.d(t,"a",(function(){return f}));var r=n(6),a=n.n(r),c=n(18),s=n(11),i=n.n(s),u=n(5);i.a.defaults.baseURL="https://connections-api.herokuapp.com/";var o=function(e){i.a.defaults.headers.common.Authorization="Bearer ".concat(e)},l=function(){i.a.defaults.headers.common.Authorization=""},b=Object(u.c)("users/registration",function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.post("/users/signup",t);case 3:return n=e.sent,r=n.data,o(r.token),e.abrupt("return",r);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),d=Object(u.c)("users/logedIn",function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.post("/users/login",t);case 3:return n=e.sent,r=n.data,o(r.token),e.abrupt("return",r);case 9:return e.prev=9,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),j=Object(u.c)("users/logOut",Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.post("/users/logout");case 3:l(),e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))),f=Object(u.c)("user/getCurrentUserData",function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r,c,s,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState,null!==(c=r().user.token)){e.next=4;break}return e.abrupt("return",{name:"",email:"",isLogedIn:!1});case 4:return o(c),e.prev=5,e.next=8,i.a.get("/users/current");case 8:return s=e.sent,u=s.data,e.abrupt("return",{name:u.name,email:u.email,isLogedIn:!0});case 13:return e.prev=13,e.t0=e.catch(5),e.abrupt("return",e.t0);case 16:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t,n){return e.apply(this,arguments)}}())},17:function(e,t,n){e.exports={navLink:"Navigation_navLink__3YLG5",activeNavLink:"Navigation_activeNavLink__3Out5",navigation:"Navigation_navigation__TXKId",navContainer:"Navigation_navContainer__1DsIx"}},27:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return s}));var r=n(5),a=Object(r.b)("contacts/setFilter"),c=Object(r.b)("contacts/openModal"),s=Object(r.b)("contacts/closeModal")},28:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return d}));var r=n(6),a=n.n(r),c=n(18),s=n(5),i=n(11),u=n.n(i);u.a.defaults.baseURL="https://connections-api.herokuapp.com/";var o=Object(s.c)("contacts/fetchContacts",Object(c.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.get("/contacts");case 3:return t=e.sent,n=t.data,e.abrupt("return",n);case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))),l=Object(s.c)("contacts/postContact",function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.post("/contacts",t);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()),b=Object(s.c)("contacts/deleteContact",function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.delete("/contacts/".concat(t));case 3:return e.abrupt("return",t);case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()),d=Object(s.c)("contacts/correctContact",function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r,c,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,r=t.name,c=t.number,e.prev=1,s={name:r,number:c},e.next=5,u.a.patch("/contacts/".concat(n),s);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}())},35:function(e,t,n){e.exports={userMenuContainer:"userMenu_userMenuContainer__3zZLC",userMenuBtn:"userMenu_userMenuBtn__3xK8S"}},52:function(e,t,n){e.exports={Container:"Container_Container__1A6NW"}},83:function(e,t,n){},87:function(e,t,n){"use strict";n.r(t);var r,a,c=n(0),s=n.n(c),i=n(25),u=n.n(i),o=n(5),l=n(7),b=n(28),d=n(27),j=n(14),f=Object(o.d)({name:"contacts",initialState:{items:[],filter:"",isModalOpen:!1,mutableContactId:null},extraReducers:(r={},Object(l.a)(r,b.c.fulfilled,(function(e,t){e.items=t.payload})),Object(l.a)(r,d.c,(function(e,t){e.filter=t.payload})),Object(l.a)(r,b.d.fulfilled,(function(e,t){e.items.push(t.payload)})),Object(l.a)(r,b.b.fulfilled,(function(e,t){e.items=e.items.filter((function(e){return e.id!==t.payload}))})),Object(l.a)(r,d.b,(function(e,t){e.isModalOpen=!0,e.mutableContactId=t.payload})),Object(l.a)(r,d.a,(function(e){e.isModalOpen=!1})),Object(l.a)(r,j.b.fulfilled,(function(e){e.items=[],e.filter=""})),r)}).reducer,p=Object(o.d)({name:"user",initialState:{user:{name:"",email:""},token:null,isLogedIn:!1,isRefreshing:!1},extraReducers:(a={},Object(l.a)(a,j.d.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLogedIn=!0})),Object(l.a)(a,j.c.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLogedIn=!0})),Object(l.a)(a,j.b.fulfilled,(function(e){e.user={name:"",email:""},e.token=null,e.isLogedIn=!1})),Object(l.a)(a,j.a.fulfilled,(function(e,t){e.user.name=t.payload.name,e.user.email=t.payload.email,e.isLogedIn=t.payload.isLogedIn,e.isRefreshing=!1})),Object(l.a)(a,j.a.rejected,(function(e,t){e.isRefreshing=!1})),Object(l.a)(a,j.a.pending,(function(e,t){e.isRefreshing=!0})),a)}).reducer,O=n(20),h=n(49),v={key:"user",storage:n.n(h).a,whitelist:"token"},x=Object(o.a)({reducer:{contacts:f,user:Object(O.g)(v,p)},middleware:function(e){return e({serializableCheck:{ignoredActions:[O.a,O.f,O.b,O.c,O.d,O.e]}})},devTools:!1}),m=Object(O.h)(x),g=n(50),k=n(4),y=n(19),L=(n(81),n(82),n(3)),C=(n(83),n(17)),N=n.n(C),w=function(e){return e.user.isLogedIn},_=function(e){return e.user.user.name},I=function(e){return e.user.isRefreshing},M=n(89),z=n(35),R=n.n(z),S=n(1),B=Object(k.b)()((function(){var e=Object(k.d)(_),t=Object(k.c)();return Object(S.jsxs)("div",{className:R.a.userMenuContainer,children:[Object(S.jsxs)("p",{children:["\u041f\u0440\u0438\u0432\u0435\u0442: ",e]}),Object(S.jsx)(M.a,{className:R.a.userMenuBtn,type:"button",onClick:function(){return t(Object(j.b)())},children:"\u0412\u044b\u0439\u0442\u0438"})]})})),A=Object(k.b)()((function(){return Object(S.jsxs)("div",{className:N.a.navContainer,children:[Object(S.jsx)(y.b,{to:"/login",className:N.a.navLink,activeClassName:N.a.activeNavLink,children:"\u041b\u043e\u0433\u0438\u043d"}),Object(S.jsx)(y.b,{to:"/register",className:N.a.navLink,activeClassName:N.a.activeNavLink,children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})]})})),F=Object(k.b)()((function(){var e=Object(k.d)(w);return Object(S.jsx)(S.Fragment,{children:e?Object(S.jsx)(B,{}):Object(S.jsx)(A,{})})})),U=Object(k.b)()((function(){var e=Object(k.d)(w),t=Object(k.d)(I);return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)("nav",{className:N.a.navigation,children:[Object(S.jsxs)("div",{children:[Object(S.jsx)(y.b,{to:"/",exact:!0,className:N.a.navLink,activeClassName:N.a.activeNavLink,children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),e&&Object(S.jsx)(y.b,{to:"/contacts",className:N.a.navLink,activeClassName:N.a.activeNavLink,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"})]}),!t&&Object(S.jsx)(F,{})]}),Object(S.jsx)("hr",{})]})})),D=n(52),E=n.n(D),J=function(e){var t=e.children;return Object(S.jsx)("div",{className:E.a.Container,children:t})},K=n(8),T=n(21),G=["children"],P=Object(k.b)()((function(e){var t=e.children,n=Object(T.a)(e,G),r=Object(k.d)(w);return Object(S.jsx)(L.b,Object(K.a)(Object(K.a)({},n),{},{children:r?t:Object(S.jsx)(L.a,{to:"/login"})}))})),W=["children","restrickted"],X=Object(k.b)()((function(e){var t=e.children,n=e.restrickted,r=void 0!==n&&n,a=Object(T.a)(e,W),c=Object(k.d)(w)&&r;return Object(S.jsx)(L.b,Object(K.a)(Object(K.a)({},a),{},{children:c?Object(S.jsx)(L.a,{to:"/contacts"}):t}))})),Y=Object(c.lazy)((function(){return n.e(9).then(n.bind(null,110))})),Z=Object(c.lazy)((function(){return n.e(4).then(n.bind(null,111))})),q=Object(c.lazy)((function(){return n.e(5).then(n.bind(null,116))})),H=Object(c.lazy)((function(){return Promise.all([n.e(3),n.e(8)]).then(n.bind(null,117))})),Q=Object(c.lazy)((function(){return n.e(6).then(n.bind(null,112))})),V=Object(c.lazy)((function(){return n.e(7).then(n.bind(null,113))})),$=Object(k.b)()((function(){var e=Object(k.c)();return Object(c.useEffect)((function(){e(Object(j.a)())}),[e]),Object(S.jsxs)(J,{children:[Object(S.jsx)(U,{}),Object(S.jsx)(L.d,{children:Object(S.jsxs)(c.Suspense,{fallback:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...",children:[Object(S.jsx)(X,{path:"/",exact:!0,children:Object(S.jsx)(Y,{})}),Object(S.jsxs)(P,{path:"/contacts",children:[Object(S.jsx)(Z,{}),Object(S.jsx)(q,{}),Object(S.jsx)(H,{})]}),Object(S.jsx)(X,{restrickted:!0,path:"/login",children:Object(S.jsx)(Q,{})}),Object(S.jsx)(X,{restrickted:!0,path:"/register",children:Object(S.jsx)(V,{})})]})})]})}));u.a.render(Object(S.jsx)(s.a.StrictMode,{children:Object(S.jsx)(k.a,{store:x,children:Object(S.jsx)(g.a,{loading:null,persistor:m,children:Object(S.jsx)(y.a,{children:Object(S.jsx)($,{})})})})}),document.getElementById("root"))}},[[87,1,2]]]);
//# sourceMappingURL=main.dd9f1755.chunk.js.map